<?xml version="1.0" encoding="utf-8"?>
<SpiderEngine xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

  <Title>网络媒体.综合门户.新浪.新股.评论</Title>
  <Description>网络媒体.综合门户.新浪.新股.评论</Description>

  <!--起始地址-->
  <InputList>
    <Input xsi:type="HttpInput">
      <Encoding>gb2312</Encoding>
      <ContentType>text/html; charset=gb2312</ContentType>
      <Method>GET</Method>
      <Sleep>0</Sleep>
      <CookieClean>32767</CookieClean>
      <Referer>http://roll.finance.sina.com.cn/finance/xg/index.shtml</Referer>
      <Accept>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</Accept>
      <UserAgent>Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36</UserAgent>
      <Headers>
        <NameValue>
          <Name>Accept-Language</Name>
          <Value>zh-CN,zh;q=0.8,en;q=0.6</Value>
        </NameValue>
        <NameValue>
          <Name>Cache-Control</Name>
          <Value>max-age=0</Value>
        </NameValue>
      </Headers>
      <UrlEnumerator>
        <UrlFormat>http://roll.finance.sina.com.cn/finance/xg/index_{PAGENUM}.shtml</UrlFormat>
        <EnumeratorRuleList>
          <EnumeratorRule xsi:type="ForEnumeratorRule">
            <Feature>{PAGENUM}</Feature>
            <Start>1</Start>
            <End>120</End>
            <Step>1</Step>
            <Direction>true</Direction>
          </EnumeratorRule>
        </EnumeratorRuleList>
      </UrlEnumerator>
    </Input>
  </InputList>

  <!--导航规则-->
  <NavigationRule  xsi:type="RegexNavigationRule">
    <Begin>&lt;!-- 列表 begin --&gt;</Begin>
    <End>&lt;!-- 列表 end --&gt;</End>
    <RegexValue>http://finance.sina.com.cn/[0-9a-zA-z/]+.shtml</RegexValue>
  </NavigationRule>

  <IsSplitTable>false</IsSplitTable>

  <!--抓取规则-->
  <FieldList>

    <Field>
      <Title>网络媒体</Title>
      <DataName>网络媒体</DataName>
      <Require>true</Require>
      <Sort>0</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>网络媒体</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>综合门户</Title>
      <DataName>综合门户</DataName>
      <Require>true</Require>
      <Sort>10</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>综合门户</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>新浪</Title>
      <DataName>新浪</DataName>
      <Require>true</Require>
      <Sort>20</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>新浪</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>新股</Title>
      <DataName>新股</DataName>
      <Require>true</Require>
      <Sort>30</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>新股</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>评论</Title>
      <DataName>评论</DataName>
      <Require>true</Require>
      <Sort>40</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>评论</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>采集时间</Title>
      <DataName>采集时间</DataName>
      <Sort>50</Sort>
      <Require>true</Require>
      <Rule>
        <Rule xsi:type="DateRule">
          <Format>yyyy-MM-dd HH:mm:ss</Format>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>发布时间</Title>
      <DataName>发布时间</DataName>
      <Require>true</Require>
      <Sort>60</Sort>
      <Rule>
        <Rule xsi:type="SubStringRule">
          <Begin>time-source</Begin>
          <End>&lt;span</End>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>&amp;nbsp;</Origin>
          <Target> </Target>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>"</Origin>
          <Target></Target>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>&gt;</Origin>
          <Target></Target>
        </Rule>
        <Rule xsi:type="TrimRule" />
      </Rule>

      <Rule2>
        <Rule xsi:type="SubStringRule">
          <Begin>pub_date</Begin>
          <End>&lt;span</End>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>&amp;nbsp;</Origin>
          <Target> </Target>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>"</Origin>
          <Target></Target>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>&gt;</Origin>
          <Target></Target>
        </Rule>
		<Rule xsi:type="ReplaceRule">
          <Origin>&lt;/span</Origin>
          <Target></Target>
        </Rule>
        <Rule xsi:type="TrimRule" />
      </Rule2>

    </Field>

    <Field>
      <Title>文章作者</Title>
      <DataName>文章作者</DataName>
      <Sort>70</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>暂无</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>参与人数</Title>
      <DataName>参与人数</DataName>
      <Require>true</Require>
      <Sort>80</Sort>
      <Rule>
        <Rule xsi:type="FixedValueRule" >
          <Text>0</Text>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>当前网址</Title>
      <DataName>当前网址</DataName>
	  <Require>true</Require>
      <Sort>90</Sort>
      <Rule>
        <Rule xsi:type="SessionRule">
          <Key>Request.Url</Key>
        </Rule>
      </Rule>
    </Field>

    <Field>
      <Title>文章标题</Title>
      <DataName>文章标题</DataName>
	  <Require>true</Require>
      <Sort>100</Sort>
      <Rule>
        <Rule xsi:type="SubStringRule">
          <Begin>id="artibodyTitle"</Begin>
          <End>/h1&gt;</End>
        </Rule>
        <Rule xsi:type="SubStringRule">
          <Begin>&gt;</Begin>
          <End>&lt;</End>
        </Rule>
        <Rule xsi:type="TrimRule" />
      </Rule>
	  
    </Field>

    <Field>
      <Title>文章来源</Title>
      <DataName>文章来源</DataName>
      <Sort>101</Sort>
      <Rule>
        <Rule xsi:type="SubStringRule">
          <Begin>media_name</Begin>
          <End>&lt;/span&gt;</End>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>"&gt;&lt;a</Origin>
          <Target>&lt;a</Target>
        </Rule>
        <Rule xsi:type="ReplaceRule">
          <Origin>&amp;nbsp;</Origin>
          <Target> </Target>
        </Rule>
        <Rule xsi:type="TrimRule" />
        <Rule xsi:type="ReplaceRule">
          <Origin>"&gt;&lt;a</Origin>
          <Target>&lt;a</Target>
        </Rule>
        <Rule xsi:type="Base64Rule" />
      </Rule>
    </Field>

    <Field>
      <Title>文章内容</Title>
      <DataName>文章内容</DataName>
	  <Require>false</Require>
      <Sort>102</Sort>
      <Rule>
        <Rule xsi:type="SubStringRule">
          <Begin>&lt;!--wapdump end--&gt;</Begin>
          <End>publish_helper_end</End>
        </Rule>
        <Rule xsi:type="TrimRule" />
      </Rule>
	  
	  <Rule2>
        <Rule xsi:type="SubStringRule">
          <Begin>id="artibody"</Begin>
          <End>&lt;!-- 正文内容 end --&gt;</End>
        </Rule>
        <Rule xsi:type="TrimRule" />
      </Rule2>
	  
    </Field>

  </FieldList>

  <!--发布规则-->
  <OutputList>
    <Output xsi:type="CsvOutput">
      <Path>data/网络媒体.综合门户.新浪.新股.评论.csv</Path>
    </Output>
  </OutputList>

</SpiderEngine>